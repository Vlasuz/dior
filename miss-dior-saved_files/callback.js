var customerCallbacks=function($){var actionStop;var callbackForm;var private_methods={animateLoader:function(action){if(action=="start")$(".callbacks_loader").fadeIn();else $(".callbacks_loader").fadeOut()},setMessage:function(msg){$(".callbacks_message").html(msg)},clearFields:function(){$("#callbacks_name").val("");$("#callbacks_phone").val("");$("#callbacks_comment").val("");var phone=$("#callbacks_phone");phone.data("bfhphone",null);phone.bfhphone(phone.data())},hideForm:function(){$(".callbacks-welcome-message").fadeOut();
$("#callbacks_name").fadeOut();$("#callbacks_phone").fadeOut();$("#callbacks_comment").fadeOut();$(".webforms-callback .buttons-set").fadeOut()},callAjaxControllerLogin:function(url){if(actionStop!=true){actionStop=true;private_methods.animateLoader("start");private_methods.hideForm();private_methods.setMessage("");var name=$("#callbacks_name").val();var phone=$("#callbacks_phone").val();var comment=$("#callbacks_comment").val();var call_name=$("#call_name").val();jQuery.post(url,{real_name:name,
phone:phone,comment:comment,name:call_name}).done(function(msg){if(msg.error){private_methods.setMessage(msg.error);private_methods.showForm()}else if(msg.success){private_methods.clearFields();private_methods.hideForm();private_methods.setMessage(msg.success)}actionStop=false;private_methods.animateLoader("stop")}).fail(function(jqXHR,textStatus,errorThrown){actionStop=false;private_methods.animateLoader("stop");private_methods.showForm()})}}};var public_methods={callbackInit:function(){callbackForm=
new VarienForm("form_customercallbacks");actionStop=false},submitForm:function(){$("#form_customercallbacks").submit(function(){if(callbackForm.validator.validate())private_methods.callAjaxControllerLogin($("#form_customercallbacks").attr("action"));return false})}};return public_methods}(jQuery);
