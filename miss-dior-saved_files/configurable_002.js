Product.Config.prototype.getOptionLabel=Product.Config.prototype.getOptionLabel.wrap(function(parentMethod,option,price){var str=option.label;return str});Product.Config.prototype.reloadOptionLabels=Product.Config.prototype.reloadOptionLabels.wrap(function(parentMethod,element){for(var i=0;i<element.options.length;i++)if(element.options[i].config)element.options[i].text=this.getOptionLabel(element.options[i].config,"")});
Product.Config.prototype.fillSelect=Product.Config.prototype.fillSelect.wrap(function(parentMethod,element){var attributeId=element.id.replace(/[a-z]*/,"");var options=this.getAttributeOptions(attributeId);this.clearSelect(element);var prevConfig=false;if(element.prevSetting)prevConfig=element.prevSetting.options[element.prevSetting.selectedIndex];options.sort(function(a,b){if(a.price<b.price)return-1;if(a.price>b.price)return 1;return 0});if(options){var index=0;for(var i=0;i<options.length;i++){var allowedProducts=
[];if(prevConfig)for(var j=0;j<options[i].products.length;j++){if(prevConfig.config.allowedProducts&&prevConfig.config.allowedProducts.indexOf(options[i].products[j])>-1)allowedProducts.push(options[i].products[j])}else allowedProducts=options[i].products.clone();if(allowedProducts.size()>0){options[i].allowedProducts=allowedProducts;element.options[index]=new Option(this.getOptionLabel(options[i],options[i].price),options[i].id);if(typeof options[i].price!="undefined")element.options[index].setAttribute("price",
options[i].price);element.options[index].config=options[i];index++}}}});
