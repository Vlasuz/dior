var quickOrderSlide=function($){var actionStop;var learnbuyingForm;var private_methods={animateLoader:function(action){if(action=="start")$(".quickorder_loader").fadeIn();else $(".quickorder_loader").fadeOut()},setMessage:function(msg){$(".quickorder_message").html(msg)},clearFields:function(){$("#quickorder_firstname").val("");$("#quickorder_lastname").val("");$("#quickorder_phone").val("");var phone=$("#quickorder_phone");phone.data("bfhphone",null);phone.bfhphone(phone.data())},hideForm:function(){$(".quickorder-welcome-message").fadeOut();
$("#quickorder_firstname").fadeOut();$("#quickorder_lastname").fadeOut();$("#quickorder_phone").fadeOut();$(".webforms-quickorder .buttons-set").fadeOut()},showForm:function(){$(".quickorder-welcome-message").fadeIn();$("#quickorder_firstname").fadeIn();$("#quickorder_lastname").fadeIn();$("#quickorder_phone").fadeIn();$(".webforms-quickorder .buttons-set").fadeIn()},callAjaxControllerLogin:function(url){if(actionStop!=true){actionStop=true;private_methods.animateLoader("start");private_methods.hideForm();
private_methods.setMessage("");var firstName=$("#quickorder_firstname").val();var lastName=$("#quickorder_lastname").val();var phone=$("#quickorder_phone").val();var product_id=$("#quickorder_product_id").val();var learnb_name=$("#quickorder_name").val();jQuery.post(url,{first_name:firstName,last_name:lastName,phone:phone,product_id:product_id,name:learnb_name}).done(function(msg){$(".quickorder_message").removeClass("error-message");if(msg.error){$(".quickorder_message").addClass("error-message");
private_methods.setMessage(msg.error);private_methods.showForm()}else if(msg.success){private_methods.clearFields();private_methods.setMessage(msg.success)}actionStop=false;private_methods.animateLoader("stop")}).fail(function(jqXHR,textStatus,errorThrown){actionStop=false;private_methods.animateLoader("stop");private_methods.showForm()})}}};var public_methods={callbackInit:function(){learnbuyingForm=new VarienForm("quick-order-form");actionStop=false},submitForm:function(){$("#quick-order-form").submit(function(){if(learnbuyingForm.validator.validate())private_methods.callAjaxControllerLogin($("#quick-order-form").attr("action"));
return false})}};return public_methods}(jQuery);
jQuery(function($){var user=$("#user");if(user.length){if(!$("#quickorder_firstname").val()&&user.data("first-name")!=="undefined")$("#quickorder_firstname").val(user.data("first-name"));if(!$("#quickorder_lastname").val()&&user.data("last-name")!=="undefined")$("#quickorder_lastname").val(user.data("last-name"));if(!$("#quickorder_phone").val()&&jQuery("#quickorder_phone").val()=="+380 "&&user.data("phone"))$("#quickorder_phone").val(user.data("phone"))}quickOrderSlide.callbackInit();quickOrderSlide.submitForm()});
