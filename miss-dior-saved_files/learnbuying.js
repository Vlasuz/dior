var learnbuying=function($){var actionStop;var learnbuyingForm;var private_methods={animateLoader:function(action){if(action=="start")$(".learnbuying_loader").fadeIn();else $(".learnbuying_loader").fadeOut()},setMessage:function(msg){$(".learnbuying_message").html(msg)},clearFields:function(){$("#learnbuying_name").val("");$("#learnbuying_phone").val("");var phone=$("#learnbuying_phone");phone.data("bfhphone",null);phone.bfhphone(phone.data())},hideForm:function(){$(".learnbuying-welcome-message").fadeOut();
$("#learnbuying_name").fadeOut();$("#learnbuying_phone").fadeOut();$(".webforms-learnbuying .buttons-set").fadeOut()},showForm:function(){$(".learnbuying-welcome-message").fadeIn();$("#learnbuying_name").fadeIn();$("#learnbuying_phone").fadeIn();$(".webforms-learnbuying .buttons-set").fadeIn()},callAjaxControllerLogin:function(url){if(actionStop!=true){actionStop=true;private_methods.animateLoader("start");private_methods.hideForm();private_methods.setMessage("");var name=$("#learnbuying_name").val();
var phone=$("#learnbuying_phone").val();var product_id=$("#learnbuying_product_id").val();var customer_id=$("#learnbuying_customer_id").val();var learnb_name=$("#learnb_name").val();jQuery.post(url,{real_name:name,phone:phone,product_id:product_id,customer_id:customer_id,name:learnb_name}).done(function(msg){if(msg.error){private_methods.setMessage(msg.error);private_methods.showForm()}else if(msg.success){private_methods.clearFields();private_methods.setMessage(msg.success)}actionStop=false;private_methods.animateLoader("stop")}).fail(function(jqXHR,
textStatus,errorThrown){actionStop=false;private_methods.animateLoader("stop");private_methods.showForm()})}}};var public_methods={callbackInit:function(){learnbuyingForm=new VarienForm("form_learnbuying");actionStop=false},submitForm:function(){$("#form_learnbuying").submit(function(){if(learnbuyingForm.validator.validate())private_methods.callAjaxControllerLogin($("#form_learnbuying").attr("action"));return false})}};return public_methods}(jQuery);jQuery(function($){learnbuying.callbackInit();learnbuying.submitForm()});
