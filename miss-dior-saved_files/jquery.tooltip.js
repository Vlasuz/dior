(function($){$.fn.tooltip=function(opt){var def={animspeed:500,tooltip:"div.tooltip",active:"active",extraOffsetX:0,extraOffsetY:0,title:false,width:false,tipStructure:'<div class="tooltip"></div>',positionTypeX:"center",positionTypeY:"top",tipInGallery:".gallery",btnSwitch:"a.btn-prev, a.btn-next",btnClose:"a.btn-close",closeOnOpener:true,event:"click",exceptionTip:"",exception:""};$.extend(def,opt);return this.each(function(){var opener=$(this);var parent=opener.parent();var parentGallery=opener.parents(def.tipInGallery);
var btnSwitch=parentGallery.find(def.btnSwitch);if(def.title){var createTip=$(def.tipStructure).insertAfter(opener);createTip.text(opener.attr("title"));var tooltip=opener.next(def.tooltip);tipFunction()}else{var tooltip=opener.next(def.tooltip);tipFunction()}tooltip.css({position:"absolute",top:-9999,left:-9999});if(def.width)tooltip.css({width:def.width});function tipFunction(){var tooltipHeight;var tooltipWidth;var openerHeight;var openerWidth;function moveTooltip(e){var openerPos=opener.offset();
var top,left,x=openerPos.left,y=openerPos.top;tooltipHeight=tooltip.outerHeight(true);tooltipWidth=tooltip.outerWidth(true);openerHeight=opener.outerHeight();openerWidth=opener.outerWidth();switch(def.positionTypeY){case "top":top=y-tooltipHeight-def.extraOffsetY;tooltip.addClass("bottom");break;case "middle":top=y-tooltipHeight/2+openerHeight/2+def.extraOffsetY;break;case "bottom":top=y+openerHeight+def.extraOffsetY;break}switch(def.positionTypeX){case "left":left=x-tooltipWidth-def.extraOffsetX;
tooltip.addClass("left");break;case "center":left=x-tooltipWidth/2+openerWidth/2+def.extraOffsetX;break;case "right":left=x+openerWidth+def.extraOffsetX;tooltip.addClass("right");break}tooltip.css({top:top,left:left});if(parentGallery)btnSwitch.click(function(){tooltip.hide()})}tooltip.appendTo($("body")).hide();function resetTooltip(){parent.removeClass(def.active);moveTooltip()}var timer;jQuery(window).on("resize orientationchange",function(){clearTimeout(timer);tooltip.fadeOut(def.animspeed);timer=
setTimeout(resetTooltip,300)});opener.bind(def.event,function(e){jQuery(".tooltip").not(def.exceptionTip).stop().fadeOut(def.animspeed);if(def.closeOnOpener)if(parent.hasClass(def.active)){parent.removeClass(def.active);tooltip.fadeOut(def.animspeed)}else{parent.siblings().removeClass(def.active);parent.addClass(def.active);tooltip.stop().fadeIn(def.animspeed);moveTooltip()}else{parent.addClass(def.active);tooltip.stop().fadeIn(def.animspeed);moveTooltip()}e.stopPropagation();return false});if(def.event==
"focus")opener.on("blur",function(e){tooltip.fadeOut(def.animspeed);parent.removeClass(def.active)});else{$(document).bind(def.event,function(e){var targ=jQuery(e.target);if(targ.hasClass("tooltip")||targ.parents(def.tooltip).length||targ.find(def.exception).length)return;tooltip.fadeOut(def.animspeed);parent.removeClass(def.active)});$(document).keydown(function(e){if(!e)evt=window.event;if(e.keyCode==27){tooltip.fadeOut(def.animspeed);parent.removeClass(def.active)}})}var btnClose=tooltip.find(def.btnClose);
if(btnClose.length)btnClose.click(function(){tooltip.fadeOut(def.animspeed);parent.removeClass(def.active);return false})}})}})(jQuery);
